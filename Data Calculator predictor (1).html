<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analysts Tool - Property Prediction</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #3b82f6, #8b5cf6);
            --background-gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --card-bg: rgba(255, 255, 255, 0.05);
            --card-border: rgba(255, 255, 255, 0.1);
            --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            --tab-bg: #1f2937;
            --tab-active: #3b82f6;
            --tab-hover: rgba(59, 130, 246, 0.2);
            --stat-bg: rgba(30, 41, 59, 0.5);
            --text-primary: #e6e6e6;
            --text-secondary: #a0aec0;
            --text-accent: #93c5fd;
            --accent-green: #4ade80;
            --accent-blue: #60a5fa;
            --accent-purple: #c084fc;
            --accent-red: #f87171;
            --form-bg: rgba(30, 41, 59, 0.7);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            overflow-anchor: none;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--background-gradient);
            color: var(--text-primary);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            scroll-behavior: auto;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(to right, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .subtitle {
            color: var(--text-secondary);
            margin-top: 5px;
            font-size: 1.1rem;
        }
        
        .btn {
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }
        
        .btn-secondary {
            background: #374151;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }
        
        .btn-reset {
            background: #6b7280;
            color: white;
        }
        
        .btn-reset:hover {
            background: #4b5563;
        }
        
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--card-border);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .tabs {
            display: flex;
            background: var(--tab-bg);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 12px 24px;
            flex: 1;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background: var(--tab-active);
            color: white;
        }
        
        .tab:hover:not(.active) {
            background: var(--tab-hover);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: none;
        }
        
        .chart-container {
            height: 300px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        
        .stat-card {
            background: var(--stat-bg);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-title {
            font-size: 0.875rem;
            color: #94a3b8;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .stat-value.green { color: var(--accent-green); }
        .stat-value.blue { color: var(--accent-blue); }
        .stat-value.purple { color: var(--accent-purple); }
        .stat-value.red { color: var(--accent-red); }
        
        .stat-change {
            font-size: 0.75rem;
        }
        
        .stat-change.green { color: #86efac; }
        .stat-change.blue { color: #93c5fd; }
        .stat-change.purple { color: #d8b4fe; }
        .stat-change.red { color: #fca5a5; }
        
        .prediction-section {
            background: rgba(15, 23, 42, 0.7);
            border-radius: 12px;
            padding: 30px;
            margin-top: 30px;
            margin-bottom: 40px;
        }
        
        .prediction-header {
            margin-bottom: 20px;
            text-align: center;
        }
        
        .prediction-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--text-accent);
            margin-bottom: 10px;
        }
        
        .prediction-description {
            color: #94a3b8;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .prediction-results {
            margin-top: 30px;
            animation: none !important;
            min-height: 800px;
            overflow: visible;
        }
        
        .prediction-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .prediction-chart {
            background: var(--stat-bg);
            border-radius: 8px;
            padding: 20px;
            min-height: 350px;
            height: auto;
        }
        
        .prediction-details {
            background: var(--stat-bg);
            border-radius: 8px;
            padding: 20px;
            min-height: 350px;
            height: auto;
        }
        
        .prediction-detail-item {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .prediction-detail-item:last-child {
            border-bottom: none;
        }
        
        .property-info {
            display: flex;
            flex-direction: column;
        }
        
        .property-type {
            font-weight: 600;
            color: #e2e8f0;
            margin-bottom: 5px;
        }
        
        .property-details {
            font-size: 0.85rem;
            color: #94a3b8;
        }
        
        .price-info {
            text-align: right;
        }
        
        .current-price {
            font-weight: 600;
            color: #60a5fa;
            margin-bottom: 5px;
        }
        
        .predicted-price {
            font-weight: 700;
        }
        
        .predicted-price.up {
            color: #4ade80;
        }
        
        .predicted-price.down {
            color: #f87171;
        }
        
        .model-info {
            background: var(--stat-bg);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .model-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #93c5fd;
            margin-bottom: 15px;
        }
        
        .model-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .model-card {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 8px;
            padding: 15px;
        }
        
        .accuracy-bar {
            height: 8px;
            background: #1f2937;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .accuracy-fill {
            height: 100%;
            border-radius: 4px;
        }
        
        .accuracy-fill.xgb {
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            width: 92%;
        }
        
        .accuracy-fill.rf {
            background: linear-gradient(90deg, #8b5cf6, #a78bfa);
            width: 88%;
        }
        
        .bar-chart {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            padding-top: 20px;
            height: 250px;
        }
        
        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }
        
        .legend-label {
            font-size: 0.85rem;
            color: #94a3b8;
        }

        .loader {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 3px solid #3b82f6;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
            display: inline-block;
            vertical-align: middle;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .footer {
            text-align: center;
            color: #64748b;
            padding: 20px 0;
            font-size: 0.875rem;
        }
        
        .disable-animations *, .disable-animations *:before, .disable-animations *:after {
            animation: none !important;
            transition: none !important;
        }
        
        /* Property input form styles */
        .property-form {
            background: var(--form-bg);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .form-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-accent);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 6px;
        }
        
        .form-control {
            width: 100%;
            background: rgba(15, 23, 42, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 1rem;
            color: white;
            transition: all 0.2s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
        }
        
        .form-control:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 25px;
        }
        
        .price-prediction-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            margin: 30px 0;
        }
        
        .price-prediction-title {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }
        
        .price-prediction-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-green);
            margin-bottom: 10px;
        }
        
        .price-prediction-range {
            font-size: 1rem;
            color: var(--text-secondary);
        }
        
        .price-prediction-note {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .similar-properties-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-accent);
            margin: 25px 0 15px;
        }
        
        .similar-property-card {
            background: rgba(30, 41, 59, 0.6);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .property-location-icon {
            width: 16px;
            height: 16px;
            display: inline-block;
            margin-right: 5px;
            opacity: 0.7;
        }
        
        .recommendation-section {
            background: rgba(30, 41, 59, 0.4);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .recommendation-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-accent);
            margin-bottom: 10px;
        }
        
        .recommendation-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }
        
        .feature-importance {
            margin-top: 25px;
        }
        
        .importance-bar {
            height: 8px;
            background: #1f2937;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
            margin-bottom: 15px;
        }
        
        .importance-fill {
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
        }
        
        .feature-item {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        
        /* Size options table styles */
        .size-options-table {
            width: 100%;
            margin-top: 30px;
            border-collapse: separate;
            border-spacing: 0;
            overflow: hidden;
            border-radius: 8px;
        }
        
        .size-options-table th, 
        .size-options-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .size-options-table th {
            background: rgba(15, 23, 42, 0.7);
            color: var(--text-accent);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .size-options-table tr:last-child td {
            border-bottom: none;
        }
        
        .size-options-table tbody tr {
            background: rgba(30, 41, 59, 0.4);
            transition: all 0.2s;
        }
        
        .size-options-table tbody tr:hover {
            background: rgba(30, 41, 59, 0.7);
        }
        
        .size-options-table td:last-child {
            font-weight: 600;
            color: var(--accent-green);
        }
        
        .size-options-table .size-value {
            color: var(--text-primary);
        }
        
        .size-options-table .size-description {
            color: var(--text-secondary);
            font-size: 0.85rem;
            display: block;
            margin-top: 4px;
        }
        
        .size-options-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-accent);
            margin-bottom: 15px;
        }
        
        .best-value-tag {
            display: inline-block;
            background: rgba(74, 222, 128, 0.2);
            color: var(--accent-green);
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 12px;
            margin-left: 10px;
            vertical-align: middle;
        }
        
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .prediction-grid {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .size-options-table thead {
                display: none;
            }
            
            .size-options-table, .size-options-table tbody, .size-options-table tr, .size-options-table td {
                display: block;
                width: 100%;
            }
            
            .size-options-table tr {
                margin-bottom: 15px;
                border-radius: 8px;
                overflow: hidden;
            }
            
            .size-options-table td {
                text-align: right;
                padding-left: 50%;
                position: relative;
            }
            
            .size-options-table td:before {
                content: attr(data-label);
                position: absolute;
                left: 15px;
                width: 45%;
                white-space: nowrap;
                text-align: left;
                font-weight: 600;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div>
                <h1 class="title">Analysts Tool</h1>
                <p class="subtitle">Comprehensive market analytics & prediction platform</p>
            </div>
        </header>
        
        <!-- Main content -->
        <main>
            <!-- Tabs -->
            <div class="tabs">
                <div class="tab active" data-tab="property">Property Prediction</div>
            </div>
            
            <!-- Property Prediction Tab -->
            <div class="tab-content active" id="property-content">
                <div class="card">
                    <h2 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 1rem; color: #93c5fd;">
                        Property Price Prediction Tool
                    </h2>
                    <p style="color: var(--text-secondary); margin-bottom: 20px;">
                        Enter the details of the property you're interested in, and our AI will provide you with an accurate price prediction based on current market trends and available size options.
                    </p>
                    
                    <!-- Property Input Form -->
                    <div class="property-form">
                        <h3 class="form-title">Property Details</h3>
                        
                        <div class="form-grid">
                            <!-- Left Column -->
                            <div>
                                <div class="form-group">
                                    <label class="form-label">Property Type</label>
                                    <select id="property-type" class="form-control">
                                        <option value="">Select property type</option>
                                        <option value="Apartment">Apartment</option>
                                        <option value="Villa">Villa</option>
                                        <option value="Townhouse">Townhouse</option>
                                        <option value="Penthouse">Penthouse</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Area/Location</label>
                                    <select id="property-location" class="form-control">
                                        <option value="">Select location</option>
                                        <option value="Dubai Marina">Dubai Marina</option>
                                        <option value="Downtown Dubai">Downtown Dubai</option>
                                        <option value="Palm Jumeirah">Palm Jumeirah</option>
                                        <option value="Arabian Ranches">Arabian Ranches</option>
                                        <option value="Jumeirah Lake Towers">Jumeirah Lake Towers (JLT)</option>
                                        <option value="Business Bay">Business Bay</option>
                                        <option value="Emirates Hills">Emirates Hills</option>
                                        <option value="Jumeirah Beach Residence">Jumeirah Beach Residence (JBR)</option>
                                        <option value="Dubai Hills Estate">Dubai Hills Estate</option>
                                        <option value="Bluewaters Island">Bluewaters Island</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Right Column -->
                            <div>
                                <div class="form-group">
                                    <label class="form-label">Number of Bedrooms</label>
                                    <select id="property-bedrooms" class="form-control">
                                        <option value="">Select bedrooms</option>
                                        <option value="Studio">Studio</option>
                                        <option value="1">1 Bedroom</option>
                                        <option value="2">2 Bedrooms</option>
                                        <option value="3">3 Bedrooms</option>
                                        <option value="4">4 Bedrooms</option>
                                        <option value="5">5 Bedrooms</option>
                                        <option value="6+">6+ Bedrooms</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">View Type (Optional)</label>
                                    <select id="property-view" class="form-control">
                                        <option value="">Select view</option>
                                        <option value="Sea/Beach">Sea/Beach View</option>
                                        <option value="City/Skyline">City/Skyline View</option>
                                        <option value="Park/Garden">Park/Garden View</option>
                                        <option value="Street">Street View</option>
                                        <option value="Golf Course">Golf Course View</option>
                                        <option value="None">No Specific View</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button id="reset-form-btn" class="btn btn-reset">Reset</button>
                            <button id="predict-btn" class="btn btn-success">Calculate Price Prediction</button>
                        </div>
                    </div>
                    
                    <!-- Price Prediction Results (initially hidden) -->
                    <div id="prediction-results" style="display: none;" class="prediction-results">
                        <!-- Size Options Table -->
                        <div>
                            <h3 class="size-options-title">Available Size Options & Pricing</h3>
                            <table class="size-options-table">
                                <thead>
                                    <tr>
                                        <th>Size Option</th>
                                        <th>Description</th>
                                        <th>Price</th>
                                    </tr>
                                </thead>
                                <tbody id="size-options-tbody">
                                    <!-- Size options will be inserted here dynamically -->
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Predicted Price Card (Base Model) -->
                        <div class="price-prediction-card">
                            <div class="price-prediction-title">Standard Size - Estimated Property Value</div>
                            <div id="predicted-price" class="price-prediction-value">AED 2,500,000</div>
                            <div id="price-range" class="price-prediction-range">Range: AED 2,350,000 - 2,650,000</div>
                            <div class="price-prediction-note">
                                Prediction based on current market conditions and 92.4% accuracy model
                            </div>
                        </div>
                        
                        <div class="prediction-grid">
                            <!-- Property Value Comparison Chart -->
                            <div class="prediction-chart">
                                <h3 style="font-size: 1.1rem; font-weight: 600; color: #93c5fd; margin-bottom: 15px;">
                                    Property Value Comparison
                                </h3>
                                <canvas id="propertyComparisonChart" height="280"></canvas>
                            </div>
                            
                            <!-- Property Details & Similar Properties -->
                            <div class="prediction-details">
                                <h3 style="font-size: 1.1rem; font-weight: 600; color: #93c5fd; margin-bottom: 15px;">
                                    Your Property Details
                                </h3>
                                
                                <div class="prediction-detail-item">
                                    <span>Property Type</span>
                                    <span id="detail-type">Apartment</span>
                                </div>
                                <div class="prediction-detail-item">
                                    <span>Location</span>
                                    <span id="detail-location">Dubai Marina</span>
                                </div>
                                <div class="prediction-detail-item">
                                    <span>Bedrooms</span>
                                    <span id="detail-bedrooms">2</span>
                                </div>
                                <div class="prediction-detail-item">
                                    <span>Standard Size</span>
                                    <span id="detail-size">1,200 sqft</span>
                                </div>
                                <div class="prediction-detail-item">
                                    <span>View</span>
                                    <span id="detail-view">City/Skyline View</span>
                                </div>
                                
                                <div class="recommendation-section">
                                    <h4 class="recommendation-title">Investment Recommendation</h4>
                                    <p id="recommendation-text" class="recommendation-text">
                                        Based on our analysis, this property represents a <strong>good investment opportunity</strong> with potential for appreciation in the next 2-3 years. The current market in Dubai Marina shows positive growth trends for similar properties.
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="similar-properties-title">Similar Properties in the Area</div>
                        <div id="similar-properties-container">
                            <!-- Similar Properties will be generated here -->
                        </div>
                        
                        <div class="model-info">
                            <h3 class="model-title">Market Analysis & Forecast</h3>
                            
                            <!-- Market Trend Chart -->
                            <div style="margin-bottom: 25px;">
                                <canvas id="marketTrendChart" height="250"></canvas>
                            </div>
                            
                            <!-- Feature Importance -->
                            <div class="feature-importance">
                                <h4 style="font-size: 1rem; color: var(--text-accent); margin-bottom: 15px;">
                                    Key Factors Influencing Price
                                </h4>
                                
                                <div>
                                    <div class="feature-item">
                                        <span>Location</span>
                                        <span>37%</span>
                                    </div>
                                    <div class="importance-bar">
                                        <div class="importance-fill" style="width: 37%;"></div>
                                    </div>
                                    
                                    <div class="feature-item">
                                        <span>Size (sqft)</span>
                                        <span>25%</span>
                                    </div>
                                    <div class="importance-bar">
                                        <div class="importance-fill" style="width: 25%;"></div>
                                    </div>
                                    
                                    <div class="feature-item">
                                        <span>Property Type</span>
                                        <span>18%</span>
                                    </div>
                                    <div class="importance-bar">
                                        <div class="importance-fill" style="width: 18%;"></div>
                                    </div>
                                    
                                    <div class="feature-item">
                                        <span>View Type</span>
                                        <span>12%</span>
                                    </div>
                                    <div class="importance-bar">
                                        <div class="importance-fill" style="width: 12%;"></div>
                                    </div>
                                    
                                    <div class="feature-item">
                                        <span>Bedrooms</span>
                                        <span>8%</span>
                                    </div>
                                    <div class="importance-bar">
                                        <div class="importance-fill" style="width: 8%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="footer">
            <p>© 2025 Analysts Tool | Advanced Market Predictions</p>
        </footer>
    </div>

    <script>
        // Tab switching functionality
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // Since we only have one tab, this code remains but will have no effect
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                tab.classList.add('active');
                const tabName = tab.getAttribute('data-tab');
                document.getElementById(`${tabName}-content`).classList.add('active');
            });
        });
        
        // Property prediction form functionality
        const propertyType = document.getElementById('property-type');
        const propertyLocation = document.getElementById('property-location');
        const propertyBedrooms = document.getElementById('property-bedrooms');
        const propertyView = document.getElementById('property-view');
        const predictBtn = document.getElementById('predict-btn');
        const resetFormBtn = document.getElementById('reset-form-btn');
        const predictionResults = document.getElementById('prediction-results');
        
        // Chart instances to allow updates
        let propertyComparisonChartInstance;
        let marketTrendChartInstance;
        
        // Reset form button event
        resetFormBtn.addEventListener('click', () => {
            propertyType.value = '';
            propertyLocation.value = '';
            propertyBedrooms.value = '';
            propertyView.value = '';
            
            predictionResults.style.display = 'none';
        });
        
        // Predict button event
        predictBtn.addEventListener('click', () => {
            // Basic validation
            if (!propertyType.value || !propertyLocation.value || !propertyBedrooms.value) {
                alert('Please fill in all required fields (Type, Location, Bedrooms)');
                return;
            }
            
            // Show loading state
            predictBtn.disabled = true;
            predictBtn.innerHTML = '<div class="loader"></div> Calculating...';
            
            // Simulate processing delay
            setTimeout(() => {
                predictBtn.disabled = false;
                predictBtn.innerHTML = 'Calculate Price Prediction';
                
                // Generate and show prediction
                generatePrediction();
                
                // Show results section
                showPredictionResults();
            }, 1800);
        });
        
        function showPredictionResults() {
            // Disable all animations and transitions temporarily
            document.body.classList.add('disable-animations');
            
            // Display the results without any scrolling
            predictionResults.style.display = 'block';
            
            // Set heights before rendering charts to prevent layout shifts
            document.getElementById('propertyComparisonChart').parentNode.style.height = '350px';
            document.getElementById('marketTrendChart').parentNode.style.height = '250px';
            
            // Small delay to ensure DOM is ready
            setTimeout(() => {
                // Initialize charts with animations disabled
                initPropertyComparisonChart();
                initMarketTrendChart();
                
                // Re-enable animations after everything is rendered
                setTimeout(() => {
                    document.body.classList.remove('disable-animations');
                }, 500);
            }, 100);
        }
        
        function generatePrediction() {
            // Get form values
            const type = propertyType.value;
            const location = propertyLocation.value;
            const bedrooms = propertyBedrooms.value;
            const view = propertyView.value;
            
            // Calculate standard size based on property type and bedrooms
            const standardSize = getStandardSize(type, bedrooms);
            
            // Update details in the results section
            document.getElementById('detail-type').textContent = type;
            document.getElementById('detail-location').textContent = location;
            document.getElementById('detail-bedrooms').textContent = bedrooms;
            document.getElementById('detail-size').textContent = `${standardSize} sqft`;
            document.getElementById('detail-view').textContent = view || 'Standard View';
            
            // Calculate price based on inputs (in real app, this would use a model)
            let basePrice = calculateBasePrice(type, location, bedrooms, standardSize, view);
            
            // Round to nearest 10000
            basePrice = Math.round(basePrice / 10000) * 10000;
            
            // Calculate price range (±5%)
            const lowerRange = Math.round(basePrice * 0.95);
            const upperRange = Math.round(basePrice * 1.05);
            
            // Format prices with commas
            const formattedPrice = formatPrice(basePrice);
            const formattedLowerRange = formatPrice(lowerRange);
            const formattedUpperRange = formatPrice(upperRange);
            
            // Update price prediction for standard size
            document.getElementById('predicted-price').textContent = `AED ${formattedPrice}`;
            document.getElementById('price-range').textContent = `Range: AED ${formattedLowerRange} - ${formattedUpperRange}`;
            
            // Generate size options table
            generateSizeOptions(type, location, bedrooms, view, standardSize, basePrice);
            
            // Generate recommendation text
            generateRecommendation(location, type, basePrice);
            
            // Generate similar properties
            generateSimilarProperties(location, type, bedrooms, basePrice);
        }
        
        function getStandardSize(type, bedrooms) {
            // Standard sizes based on property type and number of bedrooms
            if (type === 'Apartment') {
                if (bedrooms === 'Studio') return 450;
                if (bedrooms === '1') return 750;
                if (bedrooms === '2') return 1100;
                if (bedrooms === '3') return 1600;
                if (bedrooms === '4') return 2200;
                return 2800; // 5 or more bedrooms
            } else if (type === 'Villa') {
                if (bedrooms === '2') return 1800;
                if (bedrooms === '3') return 2500;
                if (bedrooms === '4') return 3500;
                if (bedrooms === '5') return 4500;
                return 5500; // 6+ bedrooms
            } else if (type === 'Townhouse') {
                if (bedrooms === '2') return 1500;
                if (bedrooms === '3') return 2100;
                if (bedrooms === '4') return 2800;
                return 3500; // 5+ bedrooms
            } else if (type === 'Penthouse') {
                if (bedrooms === '2') return 1800;
                if (bedrooms === '3') return 2500;
                if (bedrooms === '4') return 3600;
                return 4800; // 5+ bedrooms
            }
            
            return 1200; // Default fallback
        }
        
        function calculateBasePrice(type, location, bedrooms, size, view) {
            // Base price by location
            let basePrice = 0;
            
            switch (location) {
                case 'Dubai Marina':
                    basePrice = 1300000;
                    break;
                case 'Downtown Dubai':
                    basePrice = 1800000;
                    break;
                case 'Palm Jumeirah':
                    basePrice = 2500000;
                    break;
                case 'Arabian Ranches':
                    basePrice = 1900000;
                    break;
                case 'Jumeirah Lake Towers':
                    basePrice = 1100000;
                    break;
                case 'Business Bay':
                    basePrice = 1500000;
                    break;
                case 'Emirates Hills':
                    basePrice = 3500000;
                    break;
                case 'Jumeirah Beach Residence':
                    basePrice = 1700000;
                    break;
                case 'Dubai Hills Estate':
                    basePrice = 2100000;
                    break;
                case 'Bluewaters Island':
                    basePrice = 2300000;
                    break;
                default:
                    basePrice = 1500000;
            }
            
            // Adjust by property type
            const typeMultiplier = type === 'Apartment' ? 1.0 : 
                                  type === 'Townhouse' ? 1.4 : 
                                  type === 'Villa' ? 1.7 : 
                                  type === 'Penthouse' ? 1.8 : 1.2;
            
            // Adjust by bedrooms
            const bedroomMultiplier = bedrooms === 'Studio' ? 0.7 : 
                                     bedrooms === '1' ? 1.0 : 
                                     bedrooms === '2' ? 1.3 : 
                                     bedrooms === '3' ? 1.6 : 
                                     bedrooms === '4' ? 1.9 : 
                                     bedrooms === '5' ? 2.2 : 2.5;
            
            // Adjust by size (per sqft)
            const sizeMultiplier = size / 1000;
            
            // Adjust by view
            const viewMultiplier = view === 'Sea/Beach' ? 1.15 : 
                                  view === 'City/Skyline' ? 1.08 : 
                                  view === 'Park/Garden' ? 1.05 : 
                                  view === 'Golf Course' ? 1.1 : 1.0;
            
            // Calculate final price
            let finalPrice = basePrice * typeMultiplier * bedroomMultiplier * sizeMultiplier * viewMultiplier;
            
            // Add some randomness for realism
            finalPrice = finalPrice * (0.95 + Math.random() * 0.1);
            
            return finalPrice;
        }
        
        function generateSizeOptions(type, location, bedrooms, view, standardSize, standardPrice) {
            const sizeOptionsTable = document.getElementById('size-options-tbody');
            sizeOptionsTable.innerHTML = '';
            
            // Define size variations based on property type and bedrooms
            let sizeVariations = [];
            
            if (type === 'Apartment') {
                if (bedrooms === 'Studio') {
                    sizeVariations = [
                        { size: 400, description: 'Compact Studio', priceFactor: 0.9 },
                        { size: 450, description: 'Standard Studio', priceFactor: 1.0, standard: true },
                        { size: 500, description: 'Large Studio', priceFactor: 1.12 },
                        { size: 600, description: 'Luxury Studio', priceFactor: 1.35 }
                    ];
                } else if (bedrooms === '1') {
                    sizeVariations = [
                        { size: 650, description: 'Compact 1BR', priceFactor: 0.88 },
                        { size: 750, description: 'Standard 1BR', priceFactor: 1.0, standard: true },
                        { size: 850, description: 'Large 1BR', priceFactor: 1.15 },
                        { size: 950, description: 'Luxury 1BR with Study', priceFactor: 1.35 }
                    ];
                } else if (bedrooms === '2') {
                    sizeVariations = [
                        { size: 950, description: 'Compact 2BR', priceFactor: 0.86 },
                        { size: 1100, description: 'Standard 2BR', priceFactor: 1.0, standard: true },
                        { size: 1250, description: 'Large 2BR with Balcony', priceFactor: 1.18 },
                        { size: 1400, description: 'Luxury 2BR with Maid\'s Room', priceFactor: 1.32 }
                    ];
                } else if (bedrooms === '3') {
                    sizeVariations = [
                        { size: 1400, description: 'Compact 3BR', priceFactor: 0.85 },
                        { size: 1600, description: 'Standard 3BR', priceFactor: 1.0, standard: true },
                        { size: 1850, description: '3BR with Maid\'s Room', priceFactor: 1.2 },
                        { size: 2100, description: 'Luxury 3BR Apartment', priceFactor: 1.36 }
                    ];
                } else {
                    // 4+ bedroom apartments
                    sizeVariations = [
                        { size: standardSize * 0.85, description: 'Compact ' + bedrooms + 'BR', priceFactor: 0.85 },
                        { size: standardSize, description: 'Standard ' + bedrooms + 'BR', priceFactor: 1.0, standard: true },
                        { size: standardSize * 1.15, description: 'Large ' + bedrooms + 'BR with Maid\'s Room', priceFactor: 1.2 },
                        { size: standardSize * 1.3, description: 'Luxury ' + bedrooms + 'BR with Terrace', priceFactor: 1.4 }
                    ];
                }
            } else if (type === 'Villa' || type === 'Townhouse') {
                sizeVariations = [
                    { size: standardSize * 0.85, description: 'Compact ' + bedrooms + 'BR', priceFactor: 0.85 },
                    { size: standardSize, description: 'Standard ' + bedrooms + 'BR', priceFactor: 1.0, standard: true },
                    { size: standardSize * 1.15, description: 'Large ' + bedrooms + 'BR with Garden', priceFactor: 1.18 },
                    { size: standardSize * 1.3, description: 'Luxury ' + bedrooms + 'BR with Pool', priceFactor: 1.35 }
                ];
            } else if (type === 'Penthouse') {
                sizeVariations = [
                    { size: standardSize * 0.9, description: 'Compact ' + bedrooms + 'BR', priceFactor: 0.9 },
                    { size: standardSize, description: 'Standard ' + bedrooms + 'BR', priceFactor: 1.0, standard: true },
                    { size: standardSize * 1.2, description: 'Large ' + bedrooms + 'BR with Terrace', priceFactor: 1.25 },
                    { size: standardSize * 1.4, description: 'Luxury ' + bedrooms + 'BR Duplex', priceFactor: 1.5 }
                ];
            }
            
            // Round size values to whole numbers
            sizeVariations.forEach(option => {
                option.size = Math.round(option.size);
            });
            
            // Calculate the best value option (lowest price per sqft)
            let bestValueIndex = 0;
            let bestValueRatio = Number.MAX_VALUE;
            
            sizeVariations.forEach((option, index) => {
                const price = standardPrice * option.priceFactor;
                const pricePerSqft = price / option.size;
                
                if (pricePerSqft < bestValueRatio) {
                    bestValueRatio = pricePerSqft;
                    bestValueIndex = index;
                }
            });
            
            // Create size option rows
            sizeVariations.forEach((option, index) => {
                const adjustedPrice = Math.round((standardPrice * option.priceFactor) / 10000) * 10000;
                const formattedPrice = formatPrice(adjustedPrice);
                
                const row = document.createElement('tr');
                
                // Add best value tag if this is the best value option
                const bestValueTag = index === bestValueIndex ? '<span class="best-value-tag">Best Value</span>' : '';
                
                // Add standard tag if this is the standard size
                const standardTag = option.standard ? '<span style="color: #93c5fd; margin-left: 8px;">(Standard)</span>' : '';
                
                row.innerHTML = `
                    <td data-label="Size">
                        <span class="size-value">${option.size.toLocaleString()} sqft</span>
                        ${standardTag}
                        ${bestValueTag}
                    </td>
                    <td data-label="Description">
                        <span class="size-description">${option.description}</span>
                    </td>
                    <td data-label="Price">AED ${formattedPrice}</td>
                `;
                
                sizeOptionsTable.appendChild(row);
            });
        }
        
        function generateRecommendation(location, type, price) {
            // Different recommendations based on location and price
            let recommendationText = '';
            let investmentRating = '';
            
            // Determine investment rating based on location and current market trends
            if (['Dubai Marina', 'Downtown Dubai', 'Palm Jumeirah', 'Dubai Hills Estate'].includes(location)) {
                investmentRating = '<strong>excellent investment opportunity</strong>';
            } else if (['Arabian Ranches', 'Business Bay', 'Jumeirah Beach Residence'].includes(location)) {
                investmentRating = '<strong>good investment opportunity</strong>';
            } else {
                investmentRating = '<strong>moderate investment opportunity</strong>';
            }
            
            // Additional market insights based on property type
            let marketInsight = '';
            if (type === 'Apartment') {
                marketInsight = 'Apartment prices in this area have shown steady growth over the past 12 months, with increasing demand from young professionals and investors.';
            } else if (type === 'Villa') {
                marketInsight = 'Villa prices have appreciated significantly post-pandemic, as more buyers seek larger living spaces with private outdoor areas.';
            } else if (type === 'Townhouse') {
                marketInsight = 'Townhouses offer a good balance of space and affordability, and demand remains stable in this segment of the market.';
            } else if (type === 'Penthouse') {
                marketInsight = 'Luxury penthouses continue to attract premium buyers, particularly in prestigious locations with exceptional views and amenities.';
            }
            
            // Combine into full recommendation
            recommendationText = `Based on our analysis, this property represents an ${investmentRating} with potential for appreciation in the next 2-3 years. ${marketInsight} Current market trends suggest an expected annual appreciation of ${Math.floor(4 + Math.random() * 3)}% for similar properties in ${location}.`;
            
            // Update recommendation text
            document.getElementById('recommendation-text').innerHTML = recommendationText;
        }
        
        function generateSimilarProperties(location, type, bedrooms, targetPrice) {
            const container = document.getElementById('similar-properties-container');
            container.innerHTML = '';
            
            // Generate 3 similar properties
            for (let i = 0; i < 3; i++) {
                // Randomize price within ±15% of target price
                const priceVariation = 0.85 + (Math.random() * 0.3);
                const similarPrice = Math.round((targetPrice * priceVariation) / 10000) * 10000;
                
                // Randomize size based on property type and bedrooms
                const standardSize = getStandardSize(type, bedrooms);
                const size = standardSize * (0.9 + Math.random() * 0.2);
                
                // Create similar property card
                const propertyCard = document.createElement('div');
                propertyCard.className = 'similar-property-card';
                
                // Slightly different details for variety
                const useExactLocation = Math.random() > 0.3; // 70% chance to use exact location
                const displayedLocation = useExactLocation ? location : getNeighboringArea(location);
                
                const bedroomText = bedrooms === 'Studio' ? 'Studio' : `${bedrooms} BR`;
                const sizeText = `${Math.round(size).toLocaleString()} sqft`;
                
                propertyCard.innerHTML = `
                    <div>
                        <div style="font-weight: 600; color: #e2e8f0; margin-bottom: 5px;">
                            ${type} in ${displayedLocation}
                        </div>
                        <div style="font-size: 0.85rem; color: #94a3b8;">
                            <span class="property-location-icon">📍</span>${displayedLocation}, ${bedroomText}, ${sizeText}
                        </div>
                    </div>
                    <div style="font-weight: 700; color: #60a5fa;">
                        AED ${formatPrice(similarPrice)}
                    </div>
                `;
                
                container.appendChild(propertyCard);
            }
        }
        
        function getNeighboringArea(location) {
            // Return a neighboring area based on location
            const neighboringAreas = {
                'Dubai Marina': ['JBR', 'Jumeirah Lake Towers', 'Dubai Media City'],
                'Downtown Dubai': ['Business Bay', 'DIFC', 'Burj Khalifa Area'],
                'Palm Jumeirah': ['Dubai Marina', 'Jumeirah Beach Residence', 'Dubai Media City'],
                'Arabian Ranches': ['Dubai Hills Estate', 'Motor City', 'Sports City'],
                'Jumeirah Lake Towers': ['Dubai Marina', 'Barsha Heights', 'Dubai Media City'],
                'Business Bay': ['Downtown Dubai', 'DIFC', 'Al Quoz'],
                'Emirates Hills': ['Dubai Hills Estate', 'The Springs', 'The Meadows'],
                'Jumeirah Beach Residence': ['Dubai Marina', 'Palm Jumeirah', 'Bluewaters Island'],
                'Dubai Hills Estate': ['Arabian Ranches', 'Motor City', 'DAMAC Hills'],
                'Bluewaters Island': ['Dubai Marina', 'JBR', 'Palm Jumeirah']
            };
            
            const options = neighboringAreas[location] || ['Dubai Marina', 'Downtown Dubai', 'Business Bay'];
            return options[Math.floor(Math.random() * options.length)];
        }
        
        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        
        function initPropertyComparisonChart() {
            const ctx = document.getElementById('propertyComparisonChart').getContext('2d');
            
            // Get selected property details
            const propertyType = document.getElementById('property-type').value;
            const propertyLocation = document.getElementById('property-location').value;
            const predictedPriceText = document.getElementById('predicted-price').textContent;
            const predictedPrice = parseInt(predictedPriceText.replace(/[^0-9]/g, ''));
            
            // Prepare data for chart
            const avgPricesByType = {
                'Apartment': 1450000,
                'Villa': 3200000,
                'Townhouse': 2100000,
                'Penthouse': 4500000
            };
            
            const avgPricesByLocation = {
                'Dubai Marina': 1550000,
                'Downtown Dubai': 2100000,
                'Palm Jumeirah': 3800000,
                'Arabian Ranches': 2300000,
                'Jumeirah Lake Towers': 1250000,
                'Business Bay': 1750000,
                'Emirates Hills': 4500000,
                'Jumeirah Beach Residence': 1950000,
                'Dubai Hills Estate': 2500000,
                'Bluewaters Island': 2800000
            };
            
            // Calculate price comparison for the selected property
            const avgLocationPrice = avgPricesByLocation[propertyLocation] || 2000000;
            const avgTypePrice = avgPricesByType[propertyType] || 2000000;
            
            // Calculate price per sqft
            const size = parseInt(document.getElementById('detail-size').textContent);
            const pricePerSqft = Math.round(predictedPrice / size) * 100;
            
            // Destroy previous chart if it exists
            if (propertyComparisonChartInstance) {
                propertyComparisonChartInstance.destroy();
            }
            
            propertyComparisonChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Your Property', `Avg. in ${propertyLocation}`, `Avg. ${propertyType}`, 'Price per sqft (AED x100)'],
                    datasets: [{
                        label: 'Price Comparison (AED)',
                        data: [predictedPrice, avgLocationPrice, avgTypePrice, pricePerSqft],
                        backgroundColor: [
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)'
                        ],
                        borderColor: [
                            'rgba(75, 192, 192, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    
                                    if (context.dataIndex === 3) {
                                        // Price per sqft column
                                        const value = context.raw / 100; // Adjust back to actual value
                                        return `Price per sqft: AED ${value.toLocaleString()}`;
                                    } else {
                                        return `AED ${context.raw.toLocaleString()}`;
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#a3c7ff',
                                callback: function(value) {
                                    if (value >= 1000000) {
                                        return 'AED ' + (value / 1000000).toFixed(1) + 'M';
                                    } else if (value >= 1000) {
                                        return 'AED ' + (value / 1000).toFixed(0) + 'K';
                                    } else {
                                        return 'AED ' + value;
                                    }
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#a3c7ff'
                            }
                        }
                    }
                }
            });
        }
        
        function initMarketTrendChart() {
            const ctx = document.getElementById('marketTrendChart').getContext('2d');
            
            // Get selected location for more relevant trend data
            const location = document.getElementById('property-location').value;
            
            // Generate 12 months of price index data based on location
            const baselineData = [100];
            
            // Different growth trends based on location
            let growthRate = 0;
            
            if (['Dubai Marina', 'Downtown Dubai', 'Palm Jumeirah', 'Dubai Hills Estate'].includes(location)) {
                growthRate = 0.8 + (Math.random() * 0.4); // 0.8-1.2% monthly growth (high growth areas)
            } else if (['Arabian Ranches', 'Business Bay', 'Jumeirah Beach Residence'].includes(location)) {
                growthRate = 0.5 + (Math.random() * 0.4); // 0.5-0.9% monthly growth (medium growth areas)
            } else {
                growthRate = 0.3 + (Math.random() * 0.3); // 0.3-0.6% monthly growth (stable areas)
            }
            
            // Generate historical data with some randomness
            for (let i = 1; i < 12; i++) {
                const monthlyGrowth = growthRate * (0.7 + Math.random() * 0.6); // Add variability
                const lastValue = baselineData[baselineData.length - 1];
                baselineData.push(lastValue * (1 + monthlyGrowth / 100));
            }
            
            // Calculate 6-month forecast with slightly increased growth for forecast
            const forecastData = [];
            let lastValue = baselineData[baselineData.length - 1];
            
            for (let i = 0; i < 6; i++) {
                const forecastGrowth = growthRate * (1.1 + Math.random() * 0.3); // Slightly optimistic forecast
                lastValue = lastValue * (1 + forecastGrowth / 100);
                forecastData.push(lastValue);
            }
            
            // Create month labels
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec', 
                          'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
            
            // Current month index (use 11 for December to show full year of history)
            const currentMonthIndex = 11;
            
            // Slice month labels accordingly
            const historyMonths = months.slice(currentMonthIndex - 11, currentMonthIndex + 1);
            const forecastMonths = months.slice(currentMonthIndex + 1, currentMonthIndex + 7);
            
            // Combine actual and forecast data for display
            const combinedMonths = [...historyMonths, ...forecastMonths];
            
            // Create data points with null padding to separate lines
            const actualData = [...baselineData, ...Array(6).fill(null)];
            const forecastData2 = [...Array(12).fill(null), ...forecastData];
            
            // Destroy previous chart if it exists
            if (marketTrendChartInstance) {
                marketTrendChartInstance.destroy();
            }
            
            marketTrendChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: combinedMonths,
                    datasets: [
                        {
                            label: 'Historical Price Index',
                            data: actualData,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.3
                        },
                        {
                            label: 'Price Forecast',
                            data: forecastData2,
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            borderWidth: 3,
                            borderDash: [5, 5],
                            fill: true,
                            tension: 0.3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: false,
                    plugins: {
                        legend: {
                            display: true,
                            labels: {
                                color: '#a3c7ff'
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.raw !== null) {
                                        const indexValue = parseFloat(context.raw).toFixed(1);
                                        return label + indexValue;
                                    } else {
                                        return label + 'N/A';
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#a3c7ff'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#a3c7ff'
                            }
                        }
                    }
                }
            });
        }
        
        // Prevent any scrolling craziness
        window.addEventListener('scroll', function(e) {
            if (document.body.classList.contains('disable-animations')) {
                clearTimeout(window.scrollDebounce);
                window.scrollDebounce = setTimeout(function() {
                    // Do nothing, just break any recursive scrolling
                }, 50);
            }
        }, { passive: true });
    </script>
</body>
</html>